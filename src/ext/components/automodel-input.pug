.flow-widget
  +subtitle('运行自动机器学习', 'sitemap')

  table.flow-form
    tbody
      tr
        th
          label 项目名称：
        td
          input(data-bind="value:projectName")
      tr
        th(width='225')
          label 训练集：
        td
          select(data-bind="options:trainingFrames, value:trainingFrame, optionsCaption:'(Select)'")
      // ko if:hasTrainingFrame
      tr
        th
          label 响应列：
        td
          select(data-bind="options:columns, value:column, optionsCaption:'(Select)'")
      tr
        th
          label 交叉验证折叠列：
        td
          select(data-bind="options:columns, value:foldColumn, optionsCaption:'(Select)'")
      tr
        th
          label 权重列：
        td
          select(data-bind="options:columns, value:weightsColumn, optionsCaption:'(Select)'")
      tr
        // ko with:ignoredColumnsControl
        th
          label(data-bind='text:label')
          span(data-bind='visible:isRequired') *
        td(colspan='2')
          div(style='height:25px')
            input.flow-textbox(type='text' placeholder='查找...' data-bind="value:searchTerm, valueUpdate:'afterkeydown'")
          div(style='font-size:80%' data-bind='text:searchCaption')
          div(style='margin-bottom:5px;height:300px;overflow:auto;border:1px dotted #ccc')
            table
              tbody
                // ko foreach:entries
                tr
                  td
                    label
                      input(type='checkbox' data-bind='checked:isSelected')
                      span(data-bind='text:value')
                  td.flow-narrow.flow-aside(data-bind='text:type')
                  td.flow-narrow.flow-aside(data-bind='text:missingLabel')
                // /ko

          table(style='margin-bottom:10px;width:100%')
            tbody
              tr
                td
                  +button('全选', 'check-square-o', 'selectFiltered', 'hasFilteredItems')
                  +button('全不选', 'square-o', 'deselectFiltered', 'hasFilteredItems')
                td(style='text-align:right')
                  +button('前100条', 'arrow-left', 'goToPreviousPage', 'canGoToPreviousPage')
                  +button('后100条', 'arrow-right', 'goToNextPage', 'canGoToNextPage')
          div(style='font-size:80%')
            | 只展示缺失超过&nbsp;
            input.flow-textbox(type='text' style='width:30px' placeholder='0' data-bind="value:ignoreNATerm, valueUpdate:'afterkeydown'")
            | % 数据的列。
        // /ko

      tr
        th
          label 校验集：
        td
          select(data-bind="options:validationFrames, value:validationFrame, optionsCaption:'(Select)'")
      tr
        th
          label （堆叠集成训练用）融合集：
        td
          select(data-bind="options:blendingFrames, value:blendingFrame, optionsCaption:'(Select)'")
      tr
        th
          label 用于计算排行榜的数据集：
        td
          select(data-bind="options:leaderboardFrames, value:leaderboardFrame, optionsCaption:'(Select)'")
      // /ko
      tr
        th
          label （是否过采样以）平衡类别分布：
        td
          input(type='checkbox' data-bind='checked:balanceClasses')
      // ko if:balanceClasses
      tr
        th
          label 类别采样分布：
        td
          input(data-bind='value:classSamplingFactors')
      tr
        th
          label 类别平衡后最大训练集大小：
        td
          input(data-bind='value:maxAfterBalanceSize')
      // /ko
      tr
        // ko with:excludeAlgosControl
        th
          label(data-bind='text:label')
          span(data-bind='visible:isRequired') *
        td(colspan='2')
          div(style='margin-bottom:5px;max-height:300px;overflow:auto;border:1px dotted #ccc')
            table
              tbody
                // ko foreach:entries
                tr
                  td
                    label
                      input(type='checkbox' data-bind='checked:isSelected')
                      span(data-bind='text:value')
                // /ko

        // /ko
      tr
        th
          label 最多可构建模型数：
        td
          input(data-bind="value:maxModels")
      tr
        th
          label 最长可运行时间（秒）：
        td
          input(data-bind="value:maxRuntimeSecs")
      tr
        th
          label 每个模型最长可运行时间（秒）：
        td
          input(data-bind="value:maxRuntimeSecsPerModel")
      tr
        th
          label 提前结束度量标准：
        td
          select(data-bind="options:stoppingMetrics, value:stoppingMetric")
      tr
        th
          label 排行榜排序度量标准：
        td
          select(data-bind="options:sortMetrics, value:sortMetric")
      tr
        th
          label 提前停止轮数：
        td
          input(data-bind="value:stoppingRounds")
      tr
        th
          label 提前结束相对容忍度：
        td
          input(data-bind="value:stoppingTolerance")
      tr
        th
          label k-折交叉验证折叠次数：
        td
          input(data-bind="value:nfolds")
      tr
        th
          label 是否保留交叉验证预测：
        td
          input(data-bind="checked:keepCrossValidationPredictions" type="checkbox")
      tr
        th
          label 是否保留交叉验证模型：
        td
          input(data-bind="checked:keepCrossValidationModels" type="checkbox")
      tr
        th
          label 是否保留交叉验证折叠赋值：
        td
          input(data-bind="checked:keepCrossValidationFoldAssignment" type="checkbox")
      tr
        th
          label 可重现性种子：
        td
          input(data-bind="value:seed")

      tr
        th
          label 检查点路径：
        td
          input(data-bind="value:exportCheckpointsDir")

  .flow-panel
    +button('构建模型', 'cube', 'buildModel', 'canBuildModel')
